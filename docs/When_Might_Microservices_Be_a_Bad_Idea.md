# 什么时候微服务不是一个好的选择

我们花了很长时间来探索微服务架构的潜在优势。但是在某些场景下，我一点都不建议使用微服务。现在让我们来看一下不建议使用微服务的几种场景。

## 不清楚的业务领域
错误地定义服务边界的代价很高。错误的服务边界可能导致大量的跨服务更改，过于耦合的组件，并且通常而言情况会比单体系统还要糟糕。 在“Building Microservices”中，我分享了ThoughtWorks公司的SnapCI团队的经验。尽管他们对CI（持续集成）领域非常了解，但他们最初为托管CI解决方案而尝试的服务边界并不正确。这带来了很大的变更成本和管理成本。经过几个月的鏖战，该团队决定将服务合并回一个大应用程序。后来，当应用程序的功能集有所稳定并且团队对CI领域有了更深入的了解时，找到那些稳定的边界就变得容易了。

SnapCI是一个CI/CD的托管工具。该团队以前曾开发过另一个类似的工具Go-CD。Go-CD是一个开源的，可以在本地部署而不是云端托管的CD（持续交付）工具。尽管在SnapCI项目的早期，SnapCI和Go-CD项目之间有一些代码复用，但最终SnapCI变成了一个全新的代码库。尽管如此，该团队在CD工具领域的经验使他们可以更快地确定服务边界，并将系统构建为一组微服务。

然而，几个月后，事情变的明朗起来：SnapCI的用例（*use cases*）之间的差别非常小，以至于最初对服务边界的划分并不完全正确。这导致了大量的跨服务更改，并带来较高的更改成本。最终，该团队将服务合并回一个单体系统，使他们可以有时间更好地了解边界应该在何处。一年后，该团队便有能力把单体系统拆分为微服务。事实证明，这次拆分的微服务的边界更加稳定。SnapCI的例子还远不是我所看到的这种场景的唯一例子。过早地将系统分解为微服务可能会付出高昂的代价，尤其是当我们还是该领域的新手时。在许多方面，拥有要分解为微服务的现有代码库比尝试从一开始就使用微服务要容易得多。

如果我们认为，我们对自己的领域尚未做到了如指掌，那么在进行系统分解之前先了解业务可能是个好主意。（这是进行领域建模的另一个原因，我们稍后将会讨论。）
## 初创公司

## 需要客户安装并管理的软件

## 暂无充分理由
最后，如果对要实现的目标没有清晰的认识，我们就有最充分的理由不采用微服务。正如我们将要探索的那样，采用微服务的目标决定我们从何处开始迁移，同时也决定我们如何拆解当前的系统。如果对目标没有清晰的愿景，我们就将在黑暗中摸索。迁移微服务仅仅是因为其他人都在做微服务，这是一个糟糕透顶的主意。